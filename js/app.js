/* =============================
   TRADUCTIONS
============================= */
const translations = {
  fr: {
    't-nav-home': 'Accueil',
    't-nav-tours': 'Tours',
    't-nav-services': 'Services',
    't-nav-contact': 'Contact',

    't-hajj-banner-title': 'Inscription Hajj 2026',

    't-omra-title': 'Offres Omra',

    't-products-title': 'Nos produits phares',
    't-car-omra': 'Omra',
    't-car-hajj': 'Hajj 2026',
    't-car-sahara': 'Sahara algérien',
    't-car-study': 'Études Espagne & UK',
    't-car-services': 'Location de voiture',

    't-tours-title': 'Tours & voyages',
    't-tours-omra-title': 'Séjour Omra',
    't-tours-omra-desc': 'Différentes formules : Confort, VIP & Économique.',
    't-tours-hajj-title': 'Hajj 2026',
    't-tours-hajj-desc': 'Pré-inscriptions et accompagnement complet.',
    't-tours-sahara-title': 'Tours du Sahara algérien',
    't-tours-sahara-desc': 'Circuits désert, oasis, culture & patrimoine.',
    't-tours-algeria-title': 'Voyages nostalgiques en Algérie',
    't-tours-algeria-desc': 'Programmes sur mesure pour la diaspora.',
    't-tours-andalucia-title': 'Voyage en Andalousie — Héritage de l’Islam',
    't-tours-andalucia-desc': 'Cordoue, Séville, Grenade... visites guidées.',
    't-tours-uk-title': 'Études en Angleterre',
    't-tours-uk-desc': 'Conseil & inscription.',
    't-tours-es-title': 'Études en Espagne',
    't-tours-es-desc': 'Accompagnement complet.',
    't-tours-halal-title': 'Voyages halal',
    't-tours-halal-desc': 'Turquie, Bosnie, Jordanie, Malaisie, Indonésie...',

    // CONTACT
    't-contact-title': 'Contact',
    't-contact-name': 'Nom',
    't-contact-firstname': 'Prénom',
    't-contact-nationality': 'Nationalité',
    't-contact-residence': 'Résidence',
    't-contact-phone': 'WhatsApp',
    't-contact-message': 'Message',
    't-contact-send': 'Envoyer',
    't-contact-city': 'Ville de départ',
    't-contact-lang': 'Langue préférée',
    't-contact-date': 'Date estimée du voyage',
    't-contact-type': 'Type de demande',
    't-contact-method': 'Moyen de contact souhaité',

    // Options SELECT
    'lang-fr': 'Français',
    'lang-es': 'Espagnol',
    'lang-en': 'Anglais',
    'lang-ar': 'Arabe',

    'req-omra': 'Omra',
    'req-hajj': 'Hajj 2026',
    'req-uk': 'Études en Angleterre',
    'req-es': 'Études en Espagne',
    'req-other': 'Autre',

    'method-email': 'Email',
    'method-call': 'Appel téléphonique',
    'method-whatsapp': 'WhatsApp',
  },

  /* =============================
     ESPAGNOL
  ============================= */
  es: {
    't-nav-home': 'Inicio',
    't-nav-tours': 'Viajes',
    't-nav-services': 'Servicios',
    't-nav-contact': 'Contacto',

    't-hajj-banner-title': 'Registro Hajj 2026',

    't-omra-title': 'Ofertas Omra',

    't-products-title': 'Productos destacados',
    't-car-omra': 'Omra',
    't-car-hajj': 'Hajj 2026',
    't-car-sahara': 'Sáhara argelino',
    't-car-study': 'Estudios España & UK',
    't-car-services': 'Alquiler de coche',

    't-tours-title': 'Viajes & programas',
    't-tours-omra-title': 'Viaje Omra',
    't-tours-omra-desc': 'Fórmulas: Confort, VIP & Económica.',
    't-tours-hajj-title': 'Hajj 2026',
    't-tours-hajj-desc': 'Preinscripciones y acompañamiento completo.',
    't-tours-sahara-title': 'Tours por el Sáhara',
    't-tours-sahara-desc': 'Desierto, oasis, cultura & patrimonio.',
    't-tours-algeria-title': 'Viajes nostálgicos a Argelia',
    't-tours-algeria-desc': 'Programas a medida.',
    't-tours-andalucia-title': 'Andalucía — Legado islámico',
    't-tours-andalucia-desc': 'Córdoba, Sevilla, Granada...',
    't-tours-uk-title': 'Estudios en Inglaterra',
    't-tours-uk-desc': 'Consejo & inscripción.',
    't-tours-es-title': 'Estudios en España',
    't-tours-es-desc': 'Acompañamiento completo.',
    't-tours-halal-title': 'Viajes halal',
    't-tours-halal-desc': 'Turquía, Bosnia, Jordania, Malasia, Indonesia...',

    't-contact-title': 'Contacto',
    't-contact-name': 'Nombre',
    't-contact-firstname': 'Apellido',
    't-contact-nationality': 'Nacionalidad',
    't-contact-residence': 'Residencia',
    't-contact-phone': 'WhatsApp',
    't-contact-message': 'Mensaje',
    't-contact-send': 'Enviar',
    't-contact-city': 'Ciudad de salida',
    't-contact-lang': 'Idioma preferido',
    't-contact-date': 'Fecha estimada del viaje',
    't-contact-type': 'Tipo de solicitud',
    't-contact-method': 'Método de contacto preferido',

    'lang-fr': 'Francés',
    'lang-es': 'Español',
    'lang-en': 'Inglés',
    'lang-ar': 'Árabe',

    'req-omra': 'Omra',
    'req-hajj': 'Hajj 2026',
    'req-uk': 'Estudios en Inglaterra',
    'req-es': 'Estudios en España',
    'req-other': 'Otro',

    'method-email': 'Email',
    'method-call': 'Llamada telefónica',
    'method-whatsapp': 'WhatsApp',
  },

  /* =============================
     ANGLAIS
  ============================= */
  en: {
    't-nav-home': 'Home',
    't-nav-tours': 'Tours',
    't-nav-services': 'Services',
    't-nav-contact': 'Contact',

    't-hajj-banner-title': 'Hajj 2026 Registration',

    't-omra-title': 'Umrah offers',

    't-products-title': 'Featured products',
    't-car-omra': 'Umrah',
    't-car-hajj': 'Hajj 2026',
    't-car-sahara': 'Algerian Sahara',
    't-car-study': 'Studies Spain & UK',
    't-car-services': 'Car rental',

    't-tours-title': 'Tours & programs',
    't-tours-omra-title': 'Umrah Trip',
    't-tours-omra-desc': 'Comfort, VIP & Economic packages.',
    't-tours-hajj-title': 'Hajj 2026',
    't-tours-hajj-desc': 'Pre-registration & full support.',
    't-tours-sahara-title': 'Sahara Tours',
    't-tours-sahara-desc': 'Desert, oases, culture & heritage.',
    't-tours-algeria-title': 'Nostalgic trips to Algeria',
    't-tours-algeria-desc': 'Tailor-made programs.',
    't-tours-andalucia-title': 'Andalusia — Islamic heritage',
    't-tours-andalucia-desc': 'Cordoba, Seville, Granada...',
    't-tours-uk-title': 'Studies in England',
    't-tours-uk-desc': 'Guidance & enrollment.',
    't-tours-es-title': 'Studies in Spain',
    't-tours-es-desc': 'Full support.',
    't-tours-halal-title': 'Halal trips',
    't-tours-halal-desc': 'Turkey, Bosnia, Jordan, Malaysia, Indonesia...',

    't-contact-title': 'Contact',
    't-contact-name': 'Last name',
    't-contact-firstname': 'First name',
    't-contact-nationality': 'Nationality',
    't-contact-residence': 'Residence',
    't-contact-phone': 'WhatsApp',
    't-contact-message': 'Message',
    't-contact-send': 'Send',
    't-contact-city': 'Departure city',
    't-contact-lang': 'Preferred language',
    't-contact-date': 'Estimated travel date',
    't-contact-type': 'Request type',
    't-contact-method': 'Preferred contact method',

    'lang-fr': 'French',
    'lang-es': 'Spanish',
    'lang-en': 'English',
    'lang-ar': 'Arabic',

    'req-omra': 'Umrah',
    'req-hajj': 'Hajj 2026',
    'req-uk': 'Studies in UK',
    'req-es': 'Studies in Spain',
    'req-other': 'Other',

    'method-email': 'Email',
    'method-call': 'Phone call',
    'method-whatsapp': 'WhatsApp',
  },

  /* =============================
     ARABE
  ============================= */
  ar: {
    't-nav-home': 'الرئيسية',
    't-nav-tours': 'الرحلات',
    't-nav-services': 'الخدمات',
    't-nav-contact': 'اتصل بنا',

    't-hajj-banner-title': 'تسجيل حج 2026',

    't-omra-title': 'عروض العمرة',

    't-products-title': 'منتجاتنا المميزة',
    't-car-omra': 'العمرة',
    't-car-hajj': 'حج 2026',
    't-car-sahara': 'الصحراء الجزائرية',
    't-car-study': 'الدراسة في إسبانيا وإنجلترا',
    't-car-services': 'تأجير السيارات',

    't-tours-title': 'الرحلات والبرامج',
    't-tours-omra-title': 'رحلة العمرة',
    't-tours-omra-desc': 'عروض: مريحة — فاخرة — اقتصادية.',
    't-tours-hajj-title': 'حج 2026',
    't-tours-hajj-desc': 'تسجيل أولي ومرافقة كاملة.',
    't-tours-sahara-title': 'رحلات الصحراء',
    't-tours-sahara-desc': 'الصحراء، الواحات، الثقافة والتراث.',
    't-tours-algeria-title': 'رحلات الحنين للجزائر',
    't-tours-algeria-desc': 'برامج مخصصة.',
    't-tours-andalucia-title': 'الأندلس — التراث الإسلامي',
    't-tours-andalucia-desc': 'قرطبة، إشبيلية، غرناطة...',
    't-tours-uk-title': 'الدراسة في إنجلترا',
    't-tours-uk-desc': 'توجيه وتسجيل.',
    't-tours-es-title': 'الدراسة في إسبانيا',
    't-tours-es-desc': 'مرافقة كاملة.',
    't-tours-halal-title': 'رحلات حلال',
    't-tours-halal-desc': 'تركيا، البوسنة، الأردن، ماليزيا، إندونيسيا...',

    't-contact-title': 'اتصل بنا',
    't-contact-name': 'الاسم',
    't-contact-firstname': 'اللقب',
    't-contact-nationality': 'الجنسية',
    't-contact-residence': 'بلد الإقامة',
    't-contact-phone': 'واتساب',
    't-contact-message': 'الرسالة',
    't-contact-send': 'إرسال',
    't-contact-city': 'مدينة الانطلاق',
    't-contact-lang': 'اللغة المفضلة',
    't-contact-date': 'تاريخ السفر المتوقع',
    't-contact-type': 'نوع الطلب',
    't-contact-method': 'طريقة التواصل المفضلة',

    'lang-fr': 'الفرنسية',
    'lang-es': 'الإسبانية',
    'lang-en': 'الإنجليزية',
    'lang-ar': 'العربية',

    'req-omra': 'العمرة',
    'req-hajj': 'حج 2026',
    'req-uk': 'الدراسة في إنجلترا',
    'req-es': 'الدراسة في إسبانيا',
    'req-other': 'آخر',

    'method-email': 'البريد الإلكتروني',
    'method-call': 'مكالمة هاتفية',
    'method-whatsapp': 'واتساب',
  }
};

/* =============================
   APPLY TRANSLATIONS
============================= */
function applyTranslations(lang) {
  const dict = translations[lang];
  if (!dict) return;

  Object.keys(dict).forEach(id => {
    const el = document.getElementById(id);
    if (el) {
      if (dict[id].includes("<br>")) el.innerHTML = dict[id];
      else el.textContent = dict[id];
    }
  });

  // RTL mode
  document.body.classList.toggle("rtl", lang === "ar");
}

/* =============================
   TRANSLATE SELECT OPTIONS
============================= */
function applySelectTranslations(lang) {
  const dict = translations[lang];
  if (!dict) return;

  document.querySelectorAll("option[data-i18n]").forEach(opt => {
    const key = opt.getAttribute("data-i18n");
    if (dict[key]) opt.textContent = dict[key];
  });
}

/* =============================
   SWITCH LANGUAGE
============================= */
function switchLang(lang) {
  document.querySelectorAll(".lang-pill").forEach(p =>
    p.classList.toggle("active", p.dataset.lang === lang)
  );

  applyTranslations(lang);
  applySelectTranslations(lang);
}

/* =============================
   NAVIGATION / CHANGEMENT DE PAGE
============================= */
function showPage(pageId) {
  document.querySelectorAll(".page").forEach(p =>
    p.classList.toggle("active", p.id === "page-" + pageId)
  );

  window.scrollTo({ top: 0, behavior: "smooth" });
}

/* =============================
   CARDS -> CONTACT
============================= */
function activateCards() {
  // Toutes les cartes
  document.querySelectorAll(".hero-to-contact, #page-tours .card").forEach(card => {
    card.addEventListener("click", () => showPage("contact"));
  });

  // Carrousel
  document.querySelectorAll(".carousel-item").forEach(item => {
    const target = item.dataset.target;
    if (target) item.addEventListener("click", () => showPage(target));
  });
}

/* =============================
   CARROUSEL AUTO
============================= */
function initCarousel() {
  const track = document.querySelector(".carousel-inner");
  if (!track) return;

  let index = 0;

  setInterval(() => {
    const items = document.querySelectorAll(".carousel-item");
    if (!items.length) return;

    const width = items[0].offsetWidth + 16;

    index = (index + 1) % items.length;

    track.scrollTo({
      left: width * index,
      behavior: "smooth"
    });
  }, 3000);
}

/* =============================
   INIT
============================= */
document.addEventListener("DOMContentLoaded", () => {
  applyTranslations("fr");
  applySelectTranslations("fr");
  activateCards();
  initCarousel();
});
