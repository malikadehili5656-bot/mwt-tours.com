/* =============================
   TRADUCTIONS
============================= */
const translations = {
  fr: {
    't-nav-home': 'Accueil',
    't-nav-tours': 'Tours',
    't-nav-services': 'Services',
    't-nav-contact': 'Contact',

    't-products-title': 'Nos produits phares',
    't-car-omra': 'Omra',
    't-car-hajj': 'Hajj 2026',
    't-car-sahara': 'Sahara algérien',
    't-car-study': 'Études Espagne & UK',
    't-car-services': 'Location de voiture',

    /* HOME */
    't-hajj-banner-title': 'Inscription Hajj 2026',

    /* TOURS */
    't-tours-title': 'Tours & voyages',
    't-tours-omra-title': 'Séjour Omra',
    't-tours-omra-desc': 'Différentes formules : Confort, VIP & Économique.',
    't-tours-hajj-title': 'Hajj 2026',
    't-tours-hajj-desc': 'Accompagnement complet depuis l’Espagne.',
    't-tours-sahara-title': 'Tours du Sahara algérien',
    't-tours-sahara-desc': 'Circuits désert, oasis, culture et patrimoine.',
    't-tours-algeria-title': 'Voyages nostalgiques en Algérie',
    't-tours-algeria-desc': 'Programmes sur mesure pour la diaspora.',
    't-tours-andalucia-title': 'Voyage en Andalousie — Héritage de l’Islam',
    't-tours-andalucia-desc': 'Cordoue, Séville, Grenade... visites guidées.',
    't-tours-uk-title': 'Études en Angleterre',
    't-tours-uk-desc': 'Conseil et inscription dans des écoles et universités.',
    't-tours-es-title': 'Études en Espagne',
    't-tours-es-desc': 'Accompagnement complet pour les étudiants.',
    't-tours-halal-title': 'Voyages halal',
    't-tours-halal-desc': 'Turquie, Bosnie, Jordanie, Malaisie, Indonésie, Dubai, Andalousie…',

    /* FORMULES OMRA */
    't-omra-pack-title': 'Formules Omra',
    't-omra-pack-comfort-title': 'Omra Confort',
    't-omra-pack-comfort-desc': 'Hôtels 4*, proximité des Haramain, encadrement complet.',
    't-omra-pack-vip-title': 'Omra VIP',
    't-omra-pack-vip-desc': 'Hôtels 5*, prestations premium, petits groupes.',
    't-omra-pack-econ-title': 'Omra Économique',
    't-omra-pack-econ-desc': 'Formule accessible avec encadrement complet.',

    /* SERVICES */
    't-services-title': 'Services & partenaires',
    't-serv-telecom-title': 'Partenaires télécom',
    't-serv-telecom-desc': 'Lebara, Orange, MasMovil — cartes SIM et recharges.',
    't-serv-transfer-title': 'Transfert d’argent',
    't-serv-transfer-desc': 'Western Union, Ria — transferts sécurisés.',
    't-serv-luggage-title': 'Garde-bagages',
    't-serv-luggage-desc': 'Consigne sécurisée à l’agence.',
    't-serv-visa-title': 'Assistance visa',
    't-serv-visa-desc': 'Aide et préparation de dossier.',
    't-serv-tickets-title': 'Billetterie complète',
    't-serv-tickets-desc': 'Billets terrestres, maritimes et aériens.',
    't-serv-car-title': 'Location de voiture',
    't-serv-car-desc': 'Organisation avec partenaires locaux & internationaux.',
    't-serv-hotel-title': 'Hébergements & hôtels',
    't-serv-hotel-desc': 'Appartements, hôtels & résidences.',

    /* CONTACT */
    't-contact-title': 'Contact',
    't-contact-name': 'Nom',
    't-contact-firstname': 'Prénom',
    't-contact-nationality': 'Nationalité',
    't-contact-residence': 'Résidence',
    't-contact-city': 'Ville de départ',
    't-contact-lang': 'Langue préférée',
    't-contact-date': 'Date estimée du voyage',
    't-contact-type': 'Type de demande',
    't-contact-method': 'Moyen de contact souhaité',
    't-contact-phone': 'WhatsApp',
    't-contact-message': 'Message',
    't-contact-send': 'Envoyer'
  },

  /* ======================================================
     ESPAGNOL
  ====================================================== */
  es: {
    't-nav-home': 'Inicio',
    't-nav-tours': 'Viajes',
    't-nav-services': 'Servicios',
    't-nav-contact': 'Contacto',

    't-products-title': 'Nuestros productos estrella',
    't-car-omra': 'Omra',
    't-car-hajj': 'Hajj 2026',
    't-car-sahara': 'Sahara argelino',
    't-car-study': 'Estudios España & UK',
    't-car-services': 'Alquiler de coche',

    't-hajj-banner-title': 'Inscripción Hajj 2026',

    't-tours-title': 'Viajes & programas',
    't-tours-omra-title': 'Viaje Omra',
    't-tours-omra-desc': 'Formulas disponibles: Confort, VIP y Económica.',
    't-tours-hajj-title': 'Hajj 2026',
    't-tours-hajj-desc': 'Acompañamiento completo desde España.',
    't-tours-sahara-title': 'Tours por el Sahara argelino',
    't-tours-sahara-desc': 'Desierto, oasis, cultura y patrimonio.',
    't-tours-algeria-title': 'Viajes nostálgicos a Argelia',
    't-tours-algeria-desc': 'Programas a medida para la diáspora.',
    't-tours-andalucia-title': 'Viaje a Andalucía — Legado islámico',
    't-tours-andalucia-desc': 'Córdoba, Sevilla, Granada… visitas guiadas.',
    't-tours-uk-title': 'Estudios en Inglaterra',
    't-tours-uk-desc': 'Asesoramiento y matrícula.',
    't-tours-es-title': 'Estudios en España',
    't-tours-es-desc': 'Acompañamiento completo para estudiantes.',
    't-tours-halal-title': 'Viajes halal',
    't-tours-halal-desc': 'Turquía, Bosnia, Jordania, Malasia, Indonesia, Dubái, Andalucía…',

    /* CONTACT */
    't-contact-title': 'Contacto',
    't-contact-name': 'Nombre',
    't-contact-firstname': 'Apellido',
    't-contact-nationality': 'Nacionalidad',
    't-contact-residence': 'Residencia',
    't-contact-city': 'Ciudad de salida',
    't-contact-lang': 'Idioma preferido',
    't-contact-date': 'Fecha estimada del viaje',
    't-contact-type': 'Tipo de solicitud',
    't-contact-method': 'Método de contacto',
    't-contact-phone': 'WhatsApp',
    't-contact-message': 'Mensaje',
    't-contact-send': 'Enviar'
  },

  /* ======================================================
     ANGLAIS
  ====================================================== */
  en: {
    't-nav-home': 'Home',
    't-nav-tours': 'Tours',
    't-nav-services': 'Services',
    't-nav-contact': 'Contact',

    't-products-title': 'Main products',
    't-car-omra': 'Umrah',
    't-car-hajj': 'Hajj 2026',
    't-car-sahara': 'Algerian Sahara',
    't-car-study': 'Studies Spain & UK',
    't-car-services': 'Car rental',

    't-hajj-banner-title': 'Hajj 2026 registration',

    't-tours-title': 'Tours & programs',
    't-tours-omra-title': 'Umrah trip',
    't-tours-omra-desc': 'Comfort, VIP & Economic packages.',
    't-tours-hajj-title': 'Hajj 2026',
    't-tours-hajj-desc': 'Full assistance from Spain.',
    't-tours-sahara-title': 'Algerian Sahara tours',
    't-tours-sahara-desc': 'Desert, oases, culture and heritage.',
    't-tours-algeria-title': 'Nostalgic trips to Algeria',
    't-tours-algeria-desc': 'Tailor-made programs for the diaspora.',
    't-tours-andalucia-title': 'Andalusia — Islamic heritage',
    't-tours-andalucia-desc': 'Cordoba, Seville, Granada… guided visits.',
    't-tours-uk-title': 'Studies in England',
    't-tours-uk-desc': 'Advice & school enrolment.',
    't-tours-es-title': 'Studies in Spain',
    't-tours-es-desc': 'Full support for students.',
    't-tours-halal-title': 'Halal travel',
    't-tours-halal-desc': 'Turkey, Bosnia, Jordan, Malaysia, Indonesia, Dubai, Andalusia…',

    /* CONTACT */
    't-contact-title': 'Contact',
    't-contact-name': 'Last name',
    't-contact-firstname': 'First name',
    't-contact-nationality': 'Nationality',
    't-contact-residence': 'Residence',
    't-contact-city': 'Departure city',
    't-contact-lang': 'Preferred language',
    't-contact-date': 'Estimated travel date',
    't-contact-type': 'Request type',
    't-contact-method': 'Preferred contact method',
    't-contact-phone': 'WhatsApp',
    't-contact-message': 'Message',
    't-contact-send': 'Send'
  },

  /* ======================================================
     ARABE
  ====================================================== */
  ar: {
    't-nav-home': 'الرئيسية',
    't-nav-tours': 'الرحلات',
    't-nav-services': 'الخدمات',
    't-nav-contact': 'اتصل بنا',

    't-products-title': 'خدماتنا الرئيسية',
    't-car-omra': 'العمرة',
    't-car-hajj': 'حج 2026',
    't-car-sahara': 'صحراء الجزائر',
    't-car-study': 'الدراسة — إسبانيا وإنجلترا',
    't-car-services': 'تأجير السيارات',

    't-tours-title': 'الرحلات والبرامج',
    't-tours-omra-title': 'رحلة عمرة',
    't-tours-omra-desc': 'عروض مختلفة: مريحة – فاخرة – اقتصادية.',
    't-tours-hajj-title': 'حج 2026',
    't-tours-hajj-desc': 'مرافقة كاملة انطلاقاً من إسبانيا.',
    't-tours-sahara-title': 'رحلات إلى صحراء الجزائر',
    't-tours-sahara-desc': 'جولات في الصحراء والواحات والثقافة.',
    't-tours-algeria-title': 'رحلات حنين إلى الجزائر',
    't-tours-algeria-desc': 'برامج مخصصة لأبناء الجالية.',
    't-tours-andalucia-title': 'الأندلس — التراث الإسلامي',
    't-tours-andalucia-desc': 'قرطبة، إشبيلية، غرناطة… زيارات تاريخية.',
    't-tours-uk-title': 'الدراسة في إنجلترا',
    't-tours-uk-desc': 'مرافقة واستشارة.',
    't-tours-es-title': 'الدراسة في إسبانيا',
    't-tours-es-desc': 'مرافقة كاملة للطلاب.',
    't-tours-halal-title': 'رحلات حلال',
    't-tours-halal-desc': 'تركيا، البوسنة، الأردن، ماليزيا، إندونيسيا، دبي، الأندلس…',

    /* CONTACT */
    't-contact-title': 'اتصل بنا',
    't-contact-name': 'الاسم',
    't-contact-firstname': 'اللقب',
    't-contact-nationality': 'الجنسية',
    't-contact-residence': 'الإقامة',
    't-contact-city': 'مدينة الانطلاق',
    't-contact-lang': 'اللغة المفضلة',
    't-contact-date': 'تاريخ السفر المتوقع',
    't-contact-type': 'نوع الطلب',
    't-contact-method': 'طريقة التواصل المفضلة',
    't-contact-phone': 'واتساب',
    't-contact-message': 'رسالة',
    't-contact-send': 'إرسال'
  }
};

/* =============================
   CHANGEMENT DE PAGE
============================= */
function showPage(pageId) {
  document.querySelectorAll(".page").forEach(p =>
    p.classList.toggle("active", p.id === "page-" + pageId)
  );
  window.scrollTo({ top: 0, behavior: "smooth" });
}

/* =============================
   TRADUCTION
============================= */
function applyTranslations(lang) {
  const dict = translations[lang];
  if (!dict) return;

  Object.keys(dict).forEach(id => {
    const el = document.getElementById(id);
    if (!el) return;

    if (dict[id].includes("<br>")) el.innerHTML = dict[id];
    else el.textContent = dict[id];
  });

  document.body.classList.toggle("rtl", lang === "ar");
}

function switchLang(lang) {
  document.querySelectorAll(".lang-pill").forEach(p =>
    p.classList.toggle("active", p.dataset.lang === lang)
  );
  applyTranslations(lang);
}

/* =============================
   CLIC CARDS → CONTACT
============================= */
function activateCards() {
  document.querySelectorAll(".hero-to-contact, #page-tours .card").forEach(card => {
    card.addEventListener("click", () => showPage("contact"));
  });

  document.querySelectorAll(".carousel-item").forEach(item => {
    const target = item.dataset.target;
    if (target) item.addEventListener("click", () => showPage(target));
  });
}

/* =============================
   CARROUSEL
============================= */
function initCarousel() {
  const track = document.querySelector(".carousel-inner");
  if (!track) return;

  let index = 0;
  setInterval(() => {
    const items = document.querySelectorAll(".carousel-item");
    if (!items.length) return;

    const width = items[0].offsetWidth + 16;
    index = (index + 1) % items.length;

    track.scrollTo({ left: width * index, behavior: "smooth" });
  }, 3000);
}

/* =============================
   INIT
============================= */
document.addEventListener("DOMContentLoaded", () => {
  applyTranslations("fr");
  activateCards();
  initCarousel();
});
